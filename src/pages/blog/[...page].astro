---
import { getCollection } from "astro:content";
import BaseLayout from "../../layouts/BaseLayout.astro";
import ListPosts from "../../components/ListPosts.vue";
import BlogNav from "../../components/BlogNav.vue";
import { sortItemsByDateDesc } from "../../utils/data-utils";

const posts = (
  await getCollection("blog", ({ data }) => {
    return data.draft === false && data.tag === Astro.url.pathname;
  })
).sort(sortItemsByDateDesc);
---

<BaseLayout
  title="Blog"
  description="Embark on a journey of personal insights and experiences through my blog"
  image={{ src: "/dante-preview.jpg", alt: "The preview of the site" }}
  showHeader={false}
>
  <BlogNav pathname={Astro.url.pathname} />
  <ListPosts list={posts} />
</BaseLayout>
